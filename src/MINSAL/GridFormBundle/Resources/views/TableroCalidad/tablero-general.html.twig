{% extends 'GridFormBundle::general_layout.html.twig' %}
{% block stylesheets %}
    {{ parent() }}
    <style>
        .panel_{
            height: 350px !important;
            border: 1 solid red;
        }
        .glyphicon-off, .fa-user, .fa-caret-down, .glyphicon-th-list{
            color: white;
        }
        TR{
            cursor: pointer;
        }
        .main-header{
            position: fixed;
            width: 100%;
            background-color: #873636 !important;
        }
        .content-wrapper{
            padding-top: 30px;
        }
        .titulo_{
            color: white;
            font-weight: bolder;
            font-size: 18pt;
        }
        .content-wrapper, .right-side {
            background-color: white !important;
        }        
        .axis path, .axis line {
            fill: none;
            stroke: #000;
            shape-rendering: crispEdges;
          }

          .bar {
            fill: #33B3EE;
          }

          .bar:hover {
            fill: #CCECFA ;
          }

          .x.axis path {
            display: none;
          }

          .d3-tip {
            line-height: 1;
            font-weight: bold;
            padding: 12px;
            background: rgba(0, 0, 0, 0.8);
            color: #fff;
            border-radius: 2px;
          }

          /* Creates a small triangle extender for the tooltip */
          .d3-tip:after {
            box-sizing: border-box;
            display: inline;
            font-size: 10px;
            width: 100%;
            line-height: 1;
            color: rgba(0, 0, 0, 0.8);
            content: "\25BC";
            position: absolute;
            text-align: center;
          }

          /* Style northward tooltips differently */
          .d3-tip.n:after {
            margin: -1px 0 0 0;
            top: 100%;
            left: 0;
          }
        DIV.row_tablero {
            height: 350px !important;
        }
        .listado .panel-body{
            max-height: 290px !important;
            overflow-y: auto;
        }
        .menu label{
            height: 70px;
            width: 70px;
            padding: 8px;
            padding-top: 20px;
            text-align: center;
            cursor: pointer;
        }
        
        label.active {
            border: 2px solid white !important;
        }
        .menu label span.glyphicon-class{
            display: block;
            font-size: 10pt;
        }
        .menu label span.glyphicon{
            display: block;
            font-size: 16pt;
        }
        
    </style>
{% endblock %}
{% block javascripts %}
    {{parent()}}
    <script type="text/javascript" src="{{ asset('bundles/indicadores/js/d3.v3.min.js') }}" ></script>

    <script type="text/javascript" src="{{ asset('bundles/gridform/js/angular.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('bundles/gridform/js/d3tip.js') }}"></script>
    <script type="text/javascript" src="{{ asset('bundles/gridform/js/angular-resource.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('bundles/gridform/js/ui-bootstrap-tpls-1.3.2.min.js') }}"></script>    

    <script type="text/javascript" src="{{ asset('bundles/gridform/js/TableroCalidad/barchart.js') }}"></script>
    <!--<script type="text/javascript" src="{{ asset('bundles/gridform/js/TableroCalidad/radarchart.js') }}"></script>
    <script type="text/javascript" src="{{ asset('bundles/gridform/js/TableroCalidad/linechart.js') }}"></script>
    -->
    <script type="text/javascript" src="{{ asset('bundles/gridform/js/TableroCalidad/appGeneral.js') }}"></script>
    <script type="text/javascript" src="{{ asset('bundles/gridform/js/TableroCalidad/serviciosGeneral.js') }}"></script>
    <script type="text/javascript" src="{{ asset('bundles/gridform/js/TableroCalidad/barchartComponent.js') }}"></script>
    <!--<script type="text/javascript" src="{{ asset('bundles/gridform/js/TableroCalidad/radarchartComponent.js') }}"></script>
    <script type="text/javascript" src="{{ asset('bundles/gridform/js/TableroCalidad/linechartComponent.js') }}"></script> -->
    

{% endblock %}

{% block content %}
    <div class="btn-toolbar menu" role="toolbar" aria-label="...">
        <div class="btn-group">
            <label class="btn btn-success" title='Configuraci贸n' data-toggle="modal" data-target="#modalConfiguracion">
                <span class="glyphicon glyphicon-cog" aria-hidden="true" title="Configuraci贸n"></span>
            </label>
        </div>
        <div class="btn-group">
            <label class="btn btn-primary" ng-model="filtroIndicador" uib-btn-radio="'todos1'" ng-click='procesar()'>
                <span class="glyphicon glyphicon-tasks" aria-hidden="true" title="Todos los indicadores"></span>
                <span class="glyphicon-class">Todos</span>
            </label>
            <!--<label class="btn btn-primary" ng-model="filtroIndicador" uib-btn-radio="'todos2'" >
              Radio 2
            </label>
            <label class="btn btn-primary" ng-model="filtroIndicador" uib-btn-radio="'todos3'" >
              Radio 3
            </label> -->
        </div>
        <!--<div class="btn-group">
            <label class="btn btn-success" ng-click='procesar()' >
                Procesar
            </label>
        </div> -->
    </div>
    <div class="row row_tablero" ng-if="indicadores.length > 1">
        <DIV class="col-md-6">
            <div class="panel panel-info panel_" >
                <div class="panel-heading">
                    <div class="form_row row">
                        <DIV class="col-md-4"><strong>{{'_evaluaciones_'|trans}}</strong></div>
                        <DIV class="col-md-4">
                            <div class="btn-group">
                                <label class="btn btn-primary active" ng-model="filtroListadoIndicador" uib-btn-radio="'todos'" ng-change="cambiarGrafico1('todos')">
                                    <!--<span class="glyphicon glyphicon-tasks" aria-hidden="true" title="Todos"></span> -->
                                    Todos
                                </label>
                                <label class="btn btn-success" ng-model="filtroListadoIndicador" uib-btn-radio="'+10'" ng-change="cambiarGrafico1('+10')">
                                  +10
                                </label>
                                <label class="btn btn-danger" ng-model="filtroListadoIndicador" uib-btn-radio="'-10'" ng-change="cambiarGrafico1('-10')">
                                  -10
                                </label>
                            </div>
                        </div>
                        <DIV class="col-md-4">
                            <div class="input-group">
                                <div class="input-group-addon"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></div>
                                <input type="text" class="form-control" size="10" ng-model="buscar_indicadores" >
                            </div>
                        </div>
                    </div>
                </div>
                <div class="panel-body">                        
                    <table class="table table-hover">
                        <thead>
                            <TR class="success">
                                <TH>{{'_estandar_'|trans}}</TH>
                                <TH>{{'_indicador_'|trans}}</TH>
                                <TH>{{'_calificacion_'|trans}}</TH>
                            </TR>
                        </thead>
                        <tbody ng-show="filtroListadoIndicador == 'todos'">
                            <TR  ng-repeat="ind in indicadores | filter : buscar_indicadores" >
                                <TD >[[ind.descripcion_estandar]]</TD>
                                <TD >[[ind.descripcion_indicador]]</TD>
                                <TD>[[ind.calificacion | number:2]]%</TD>
                            </TR>
                        </tbody>
                        <tbody ng-show="filtroListadoIndicador == '+10'">
                            <TR  ng-repeat="ind in indicadoresTop10 " >
                                <TD >[[ind.descripcion_estandar]]</TD>
                                <TD >[[ind.descripcion_indicador]]</TD>
                                <TD>[[ind.calificacion | number:2]]%</TD>
                            </TR>
                        </tbody>
                        <tbody ng-show="filtroListadoIndicador == '-10'">
                            <TR  ng-repeat="ind in indicadoresLess10 " >
                                <TD >[[ind.descripcion_estandar]]</TD>
                                <TD >[[ind.descripcion_indicador]]</TD>
                                <TD>[[ind.calificacion | number:2]]%</TD>
                            </TR>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="panel panel-info panel_" >
                <div class="panel-heading">
                    <strong>[[titulo_grafico1]]</strong>
                </div>
                <div class="panel-body" >
                    <bar-chart height="options.height" data="datosGrafico1" ></bar-chart>
                </div>                
            </div>
        </div>
    </div>
    
    <!-- Modal Configuraci贸n -->
    <div class="modal fade" id="modalConfiguracion" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">

                <div class="modal-header">
                    <h3 class="modal-title">Configuraci贸n</h3>
                </div>
                <div class="modal-body">
                    <strong>{{'_periodo_evaluacion_'|trans}}</strong>
                    <select class="form-control"
                            data-ng-options="periodo as periodo.etiqueta for periodo in periodos track by periodo.periodo"
                            ng-model="periodoSeleccionado" required id='selectPeriodo'>
                    </select>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>
{% endblock content%}
